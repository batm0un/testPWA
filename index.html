<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>test2</title>
	<link rel="manifest" href="/testPWA/test.webmanifest.aspx">
<script>
// Initialize deferredPrompt for use later to show browser install prompt.
var deferredPrompt;

window.onbeforeinstallprompt = function(e) {
  // Prevent the mini-infobar from appearing on mobile
  e.preventDefault();
  // Stash the event so it can be triggered later.
  deferredPrompt = e;
  // Update UI notify the user they can install the PWA
  showInstallPromotion();
  // Optionally, send analytics event that PWA install promo was shown.
  console.log(`'beforeinstallprompt' event was fired.`);
};

function showInstallPromotion(){
	var installButton=document.querySelectorAll("#installApp")[0];
	btn.style.display='block';

	installButton.addEventListener('click',function{
	  // deferredPrompt is a global variable we've been using in the sample to capture the `beforeinstallevent`
	  deferredPrompt.prompt();
	  // Find out whether the user confirmed the installation or not
	  const { outcome } = await deferredPrompt.userChoice;
	  // The deferredPrompt can only be used once.
	  deferredPrompt = null;
	  // Act on the user's choice
	  if (outcome === 'accepted') {
	    console.log('User accepted the install prompt.');
	  } else if (outcome === 'dismissed') {
	    console.log('User dismissed the install prompt');
	  }
	};
}
function hideInstallPromotion(){
	document.querySelectorAll("#installApp")[0].style.display='none';
}

	
</script>

</head>
<body> 
	<h1>24</h1>
	<input id=installApp value="install !" type=button style="display:none" />
</body>
</html>
